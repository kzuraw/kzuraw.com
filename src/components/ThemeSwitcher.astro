---

---

<select
  id="theme-switcher"
  class="bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm cursor-pointer hover:opacity-70 transition-opacity"
>
  <option value="system">System</option>
  <option value="light">Light</option>
  <option value="dark">Dark</option>
</select>

<script>
  const switcher = document.getElementById(
    "theme-switcher",
  ) as HTMLSelectElement;

  function getStoredTheme(): string {
    if ("theme" in localStorage) {
      return localStorage.theme;
    }
    return "system";
  }

  function applyTheme() {
    document.documentElement.classList.toggle(
      "dark",
      localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches),
    );
  }

  // Initialize switcher value
  switcher.value = getStoredTheme();

  // Handle theme changes
  switcher.addEventListener("change", (e) => {
    const newTheme = (e.target as HTMLSelectElement).value;
    if (newTheme === "system") {
      localStorage.removeItem("theme");
    } else {
      localStorage.theme = newTheme;
    }
    applyTheme();
  });

  // Listen for system theme changes
  window
    .matchMedia("(prefers-color-scheme: dark)")
    .addEventListener("change", applyTheme);
</script>
