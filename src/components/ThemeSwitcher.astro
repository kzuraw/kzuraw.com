---

---

<select
  id="theme-switcher"
  class="bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-sm cursor-pointer hover:opacity-70 transition-opacity"
>
  <option value="system">System</option>
  <option value="light">Light</option>
  <option value="dark">Dark</option>
</select>

<script>
  const switcher = document.getElementById(
    "theme-switcher",
  ) as HTMLSelectElement;

  function getStoredTheme(): string {
    return localStorage.getItem("theme") || "system";
  }

  function applyTheme(theme: string) {
    const root = document.documentElement;

    if (theme === "system") {
      const prefersDark = window.matchMedia(
        "(prefers-color-scheme: dark)",
      ).matches;
      root.classList.toggle("dark", prefersDark);
    } else {
      root.classList.toggle("dark", theme === "dark");
    }
  }

  // Initialize switcher value and apply theme
  const storedTheme = getStoredTheme();
  switcher.value = storedTheme;
  applyTheme(storedTheme);

  // Handle theme changes
  switcher.addEventListener("change", (e) => {
    const newTheme = (e.target as HTMLSelectElement).value;
    localStorage.setItem("theme", newTheme);
    applyTheme(newTheme);
  });

  // Listen for system theme changes
  window
    .matchMedia("(prefers-color-scheme: dark)")
    .addEventListener("change", () => {
      if (getStoredTheme() === "system") {
        applyTheme("system");
      }
    });
</script>
