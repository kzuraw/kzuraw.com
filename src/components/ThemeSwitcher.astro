---

---

<label class="flex items-center gap-2 text-sm">
  <span>Theme:</span>
  <select
    id="theme-switcher"
    class="bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 cursor-pointer hover:opacity-70 transition-opacity"
  >
    <option value="system">System</option>
    <option value="light">Light</option>
    <option value="dark">Dark</option>
  </select>
</label>

<script>
  import {
    getStoredTheme,
    setThemePreference,
    listenForSystemThemeChanges,
  } from "@/lib/theme";

  const switcher = document.getElementById(
    "theme-switcher",
  ) as HTMLSelectElement;

  // Initialize dropdown to match stored preference
  switcher.value = getStoredTheme();

  // Handle user theme selection
  switcher.addEventListener("change", (event) => {
    const target = event.target as HTMLSelectElement;
    const selectedTheme = target.value as "system" | "light" | "dark";
    setThemePreference(selectedTheme);
  });

  // React to system theme changes when in "system" mode
  listenForSystemThemeChanges();
</script>
