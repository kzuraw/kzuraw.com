---
import Footer from "@/components/footer.astro";
import Link from "@/components/link.astro";
import Meta from "@/components/meta.astro";
import Nav from "@/components/nav.astro";
import { formatDate } from "@/helpers/format-date";
import { getAllWritings } from "@/helpers/get-all-writings";
import Layout from "@/layouts/layout.astro";

const writings = await getAllWritings();
---

<Layout>
  <Meta title="Writing" slot="meta" />
  <Fragment slot="header">
    <Nav />
    <h1>Writing Archives</h1>
    <p><small>All articles organized by date.</small></p>
  </Fragment>
  <Fragment slot="content">
    <ul>
      {
        writings.map((post) => (
          <li>
            <Link href={`/writing/${post.slug}`}>
              {post.data.pubDate && (
                <time>{formatDate(post.data.pubDate)}</time>
              )}
              <span>{post.data.title}</span>
            </Link>
          </li>
        ))
      }
    </ul>
  </Fragment>
  <Fragment slot="footer">
    <Footer />
  </Fragment>
</Layout>
